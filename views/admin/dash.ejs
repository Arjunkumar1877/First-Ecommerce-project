


<%- include('../partials/admin/adminHeader.ejs') %>
<br>
<br>
<br>
<br>




<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Sales Chart</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script> <!-- Include Chart.js -->
</head>
<body style="background-color: #f8f9fa;">
  <div style="width: 80%; margin: 0 auto; display: flex; justify-content: space-around; gap: 40px;">
    <div style="width: 50%;">
      <canvas style="width: 100%;" id="doughnutChart"></canvas>
      <p style="text-align: center; font-weight: bold; margin-top: 10px;">Revenue Distribution</p>
    </div>
    <div style="width: 50%;">
      <canvas style="width: 100%;" id="pieChart"></canvas>
      <p style="text-align: center; font-weight: bold; margin-top: 10px;">Payment Methods</p>
    </div>
  </div>
  
  <div style="width: 80%; margin: 50px auto 0 auto; display: flex; justify-content: space-around; gap: 40px;">
    <div style="width: 100%;">
      <canvas style="width: 100%;" id="lineChart"></canvas>
      <p style="text-align: center; font-weight: bold; margin-top: 10px;">Order Status</p>
    </div>
 
  </div>

  <div style="width: 90%; display: flex; justify-content: center; margin-left: 50px;">

    
    <canvas  id="barChart"></canvas>



  </div>
  
  <script>
    const doughnutCtx = document.getElementById('doughnutChart');
    const pieCtx = document.getElementById('pieChart');
    const lineCtx = document.getElementById('lineChart');
    const barCtx = document.getElementById('barChart');
  
    // Doughnut Chart
    new Chart(doughnutCtx, {
      type: 'doughnut',
      data: {
        labels: ['COD', 'Razorpay', 'Total Avenue'],
        datasets: [{
          data: [<%= codTotalAmount %>, <%= razorpayTotalAmount %>, <%= totalRevenue %>],
          backgroundColor: ['#D32F2F', '#5C7AEA', '#4CAF50'],
          hoverBackgroundColor: ['#9E9E9E', '#5C7AEA', '#48BB78']
        }]
      },
      options: {
        responsive: true,
        cutoutPercentage: 70,
        legend: {
          display: true,
          position: 'bottom',
          labels: {
            fontColor: '#333',
            fontSize: 14
          }
        },
        title: {
          display: true,
          text: 'Revenue Distribution',
          fontSize: 18,
          fontColor: '#333',
          fontStyle: 'bold'
        }
      }
    });
  
    // Pie Chart
    new Chart(pieCtx, {
      type: 'pie',
      data: {
        labels: ['COD', 'Razorpay', 'Total Avenue'],
        datasets: [{
          data: [<%= codTotalAmount %>, <%= razorpayTotalAmount %>, <%= totalRevenue %>],
          backgroundColor: ['#FF6B6B', '#5C7AEA', '#48BB78'],
          hoverBackgroundColor: ['#FF6B6B', '#5C7AEA', '#48BB78']
        }]
      },
      options: {
        responsive: true,
        cutoutPercentage: 70,
        legend: {
          display: true,
          position: 'bottom',
          labels: {
            fontColor: '#333',
            fontSize: 14
          }
        },
        title: {
          display: true,
          text: 'Payment Methods',
          fontSize: 18,
          fontColor: '#333',
          fontStyle: 'bold'
        }
      }
    });
  
    // Line Chart
    new Chart(lineCtx, {
      type: 'line',
      data: {
        labels: ['Canceled-Orders', 'Returned-Orders', 'Delivered-Orders', 'Total-Orders'],
        datasets: [{
          label: 'Orders',
          data: [<%= canceledOrders %>, <%= returnedOrders %>, <%= deliveredOrders %>, <%= totalOrders %>],
          borderColor: ['#FF6B6B', '#5C7AEA', '#48BB78'],
          backgroundColor: ['transparent'],
          pointBackgroundColor: ['#FF6B6B', '#5C7AEA', '#48BB78'],
          pointHoverBackgroundColor: ['#FF6B6B', '#5C7AEA', '#48BB78']
        }]
      },
      options: {
        responsive: true,
        legend: {
          display: true,
          position: 'bottom',
          labels: {
            fontColor: '#333',
            fontSize: 14
          }
        },
        title: {
          display: true,
          text: 'Order Status',
          fontSize: 18,
          fontColor: '#333',
          fontStyle: 'bold'
        }
      }
    });
  
    // Bar Chart
    new Chart(barCtx, {
      type: 'bar',
      data: {
        labels: ['Canceled-Orders', 'Returned-Orders', 'Delivered-Orders', 'Total-Orders'],
        datasets: [{
          label: 'Dataset',
          data: [<%= canceledOrders %>, <%= returnedOrders %>, <%= deliveredOrders %>, <%= totalOrders %>],
          backgroundColor: ['#F44336', '#5C7AEA', '#48BB78', '#424242'],
          hoverBackgroundColor: ['#FF6B6B', '#424242', '#48BB78', '#424242']
        }]
      },
      options: {
        responsive: true,
        legend: {
          display: true,
          position: 'bottom',
          labels: {
            fontColor: '#333',
            fontSize: 14
          }
        },
        title: {
          display: true,
          text: 'Another Chart Title',
          fontSize: 18,
          fontColor: '#333',
          fontStyle: 'bold'
        }
      }
    });
  </script>
  
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>

</body>
</html>

















<!-- Statistics -->
<div class="row match-height">
	<div class="col-xl-4 col-lg-12">
			<div class="card">
				<div class="card-header">
					<h4 class="card-title" id="heading-multiple-thumbnails">New Banner</h4>
					<a class="heading-elements-toggle">
						<i class="la la-ellipsis-v font-medium-3"></i>
					</a>
					<div class="heading-elements">
						<span class="avatar">
							<img src="theme-assets/images/portrait/small/avatar-s-2.png" alt="avatar">
						</span>
						<span class="avatar">
							<img src="theme-assets/images/portrait/small/avatar-s-3.png" alt="avatar">
						</span>
						<span class="avatar">
							<img src="theme-assets/images/portrait/small/avatar-s-4.png" alt="avatar">
						</span>
					</div>
				</div>
				<div class="card-content">
					<div class="card-body">
						<h4 class="card-title">Content title</h4>
						<p class="card-text">Jelly beans sugar plum cheesecake cookie oat cake soufflé.Tootsie roll bonbon liquorice tiramisu pie powder.Donut sweet
							roll marzipan pastry cookie cake tootsie roll oat cake cookie.Jelly beans sugar plum cheesecake cookie oat cake soufflé. Tart lollipop carrot cake sugar plum. </p>
						<p class="card-text">Sweet roll marzipan pastry halvah. Cake bear claw sweet. Tootsie roll pie marshmallow lollipop chupa chups donut fruitcake
							cake.Jelly beans sugar plum cheesecake cookie oat cake soufflé. Tart lollipop carrot cake sugar plum. Marshmallow
							wafer tiramisu jelly beans.</p>
					</div>
				</div>
			</div>
	</div>


  
	<div class="col-xl-4 col-lg-12">
		<div class="card">
			<div class="card-content">
				<div class="card-body">
					<h4 class="card-title">Recent products</h4>
				</div>
				<div id="carousel-area" class="carousel slide" data-ride="carousel">
					<ol class="carousel-indicators">
						<li data-target="#carousel-area" data-slide-to="0" class="active"></li>
						<li data-target="#carousel-area" data-slide-to="1"></li>
						<li data-target="#carousel-area" data-slide-to="2"></li>
					</ol>
					<div class="carousel-inner" role="listbox">


         <% for( let i = 0; i < product.length; i++ ) { %>
            
						<div class="carousel-item <%= i === 0 ? 'active' : '' %>">
							<img src="uploads/<%= product[i].images[0].url %>" class="d-block w-100" alt="First slide">
              <h4><%= product[i].name %></h4>
              <div class="card-footer border-top-blue-grey border-top-lighten-5 text-muted">
                <%
          const dateCreated = new Date(product[i].dateCreated);
          
          const currentDate = new Date();
        
          const differenceMs = currentDate - dateCreated;
        
          const differenceDays = Math.floor(differenceMs / (1000 * 60 * 60 * 24));
        %>
        
        <span class="float-left">
          Product added date: <%= dateCreated.toLocaleDateString() %><br>
          Difference from Today: <%= differenceDays %> days
        </span>
        
                
              </div>
						</div>


         <% } %>

					
           
					</div>
					<a class="carousel-control-prev" href="#carousel-area" role="button" data-slide="prev">
							<span class="la la-angle-left" aria-hidden="true"></span>
							<span class="sr-only">Previous</span>
						</a>
					<a class="carousel-control-next" href="#carousel-area" role="button" data-slide="next">
							<span class="la la-angle-right icon-next" aria-hidden="true"></span>
							<span class="sr-only">Next</span>
						</a>
				</div>
			
			</div>
		</div>
	</div>



	<div class="col-xl-4 col-lg-12">
		<div class="card">
			<div class="card-header">
				<h4 class="card-title">Recent Buyers</h4>
				<a class="heading-elements-toggle">
					<i class="fa fa-ellipsis-v font-medium-3"></i>
				</a>
				<div class="heading-elements">
					<ul class="list-inline mb-1">
						<li>
							<a data-action="reload">
								<i class="ft-rotate-cw"></i>
							</a>
						</li>
					</ul>
				</div>
			</div>
			<div class="card-content">
				<div id="recent-buyers" class="media-list">


			<% users.forEach(user => { %>
        <aa href="#" class="media border-0">
          <div class="media-left pr-1">
            <span class="avatar avatar-md avatar-online">
              <img class="media-object rounded-circle" src="https://cdn-icons-png.flaticon.com/512/3177/3177440.png" alt="Generic placeholder image">
              <i></i>
            </span>
          </div>
          <div class="media-body w-100">
            <span class="list-group-item-heading"><%= user.address.firstName %> <%= user.address.lastName %></span>
            <ul class="list-unstyled users-list m-0 float-right">
              <li data-toggle="tooltip" data-popup="tooltip-custom" data-original-title="Product 1" class="avatar avatar-sm pull-up">
                <img class="media-object rounded-circle no-border-top-radius no-border-bottom-radius" src="theme-assets/images/portfolio/portfolio-1.jpg"
                  alt="Avatar">
              </li>
              <li data-toggle="tooltip" data-popup="tooltip-custom" data-original-title="Product 2" class="avatar avatar-sm pull-up">
                <img class="media-object rounded-circle no-border-top-radius no-border-bottom-radius" src="theme-assets/images/portfolio/portfolio-2.jpg"
                  alt="Avatar">
              </li>
              <li data-toggle="tooltip" data-popup="tooltip-custom" data-original-title="Product 3" class="avatar avatar-sm pull-up">
                <img class="media-object rounded-circle no-border-top-radius no-border-bottom-radius" src="theme-assets/images/portfolio/portfolio-4.jpg"
                  alt="Avatar">
              </li>
            </ul>
            <p class="list-group-item-text mb-0">
              <span class="blue-grey lighten-2 font-small-3">#<%= user._id.toString().substring(0, 10) %></span>
            </p>
          </div>
        </aa>
      <% }) %>



				</div>
			</div>
		</div>
	</div>




</div>
<!--/ Statistics -->
	<!-- ////////////////////////////////////////////////////////////////////////////-->


	
  <script src="theme-assets/js/scripts/charts/chartjs/bar/column.js" type="text/javascript"></script>


	 <!-- BEGIN VENDOR JS-->
	<script src="theme-assets/vendors/js/vendors.min.js" type="text/javascript"></script>
	<!-- BEGIN VENDOR JS-->
	<!-- BEGIN PAGE VENDOR JS-->
	<script src="theme-assets/vendors/js/charts/chartist.min.js" type="text/javascript"></script>
	<!-- END PAGE VENDOR JS-->
	<!-- BEGIN CHAMELEON  JS-->
	<script src="theme-assets/js/core/app-menu-lite.js" type="text/javascript"></script>
	<script src="theme-assets/js/core/app-lite.js" type="text/javascript"></script>
	<!-- END CHAMELEON  JS-->
	<!-- BEGIN PAGE LEVEL JS-->
	<script src="src/js/scripts/pages/dashboard-lite.js" type="text/javascript"></script>
  <!-- END PAGE LEVEL JS-->








   <!-- BEGIN VENDOR JS-->
   <script src="vendors/js/vendors.min.js" type="text/javascript"></script>
   <!-- BEGIN VENDOR JS-->
   <!-- BEGIN PAGE VENDOR JS-->
   <script src="vendors/js/charts/chart.min.js" type="text/javascript"></script>
   <!-- END PAGE VENDOR JS-->
   <!-- BEGIN CHAMELEON  JS-->
   <script src="js/core/app-menu-lite.js" type="text/javascript"></script>
   <script src="js/core/app-lite.js" type="text/javascript"></script>
   <!-- END CHAMELEON  JS-->
   <!-- BEGIN PAGE LEVEL JS-->
   <script src="js/scripts/charts/chartjs/bar/column.js" type="text/javascript"></script>
   <script src="js/scripts/charts/chartjs/pie-doughnut/doughnut-simple.js" type="text/javascript"></script>
   <!-- END PAGE LEVEL JS-->


<!-- BEGIN VENDOR JS-->
<script src="theme-assets/vendors/js/vendors.min.js" type="text/javascript"></script>
<!-- BEGIN VENDOR JS-->
<!-- BEGIN PAGE VENDOR JS-->
<script src="theme-assets/vendors/js/charts/chart.min.js" type="text/javascript"></script>
<!-- END PAGE VENDOR JS-->
<!-- BEGIN CHAMELEON  JS-->
<script src="theme-assets/js/core/app-menu-lite.js" type="text/javascript"></script>
<script src="theme-assets/js/core/app-lite.js" type="text/javascript"></script>
<!-- END CHAMELEON  JS-->
<!-- BEGIN PAGE LEVEL JS-->
<script src="theme-assets/js/scripts/charts/chartjs/bar/column.js" type="text/javascript"></script>
<script src="theme-assets/js/scripts/charts/chartjs/bar/column.js" type="text/javascript"></script>
<script src="theme-assets/js/scripts/charts/chartjs/bar/bar.js" type="text/javascript"></script>
<script src="theme-assets/js/scripts/charts/chartjs/line/line.js" type="text/javascript"></script>
<script src="theme-assets/js/scripts/charts/chartjs/pie-doughnut/pie-simple.js" type="text/javascript"></script>
<script src="theme-assets/js/scripts/charts/chartjs/pie-doughnut/doughnut-simple.js" type="text/javascript"></script>




